{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <title>Cinema</title>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="{% static 'css/cinema.css' %}"/>
        <link rel="stylesheet" href="{% static 'contrib/font-awesome-4.5.0/css/font-awesome.min.css'%}" />
        <script src="{% static 'js/retract.js' %}"></script>
        <script src="{% static 'js/simplesearch.js' %}"></script>
        <script src="{% static 'js/completion.js' %}"></script>
    </head>
    <body>


        <div id="header" class="flex_container">
            <div class="user_actions">
                {% if request.path != "/" %}
                    <a href="{% url 'index' %}"><i class="fa fa-chevron-left"></i></a>
                {% endif %}
            </div>
            <input type="search" list="movies" name="search" id="search" placeholder="Search a movie" />
            <datalist id="movies">
                {% for movie in movies %}
                    {% if movie.poster %}
                        <option data-poster="{{ movie.poster.url }}" value="{{ movie.title }}" data-link="{% url 'watch' title=movie.title %}"/>
                    {% else %}
                        <option data-poster="" value="{{ movie.title }}" data-link="{% url 'watch' title=movie.title %}"/>
                    {% endif %}
                {% endfor %}
            </datalist>
            <div class="user_actions">
                <a href="{% url 'random' %}"><i class="fa fa-random"></i></a>
                {% if request.user.is_authenticated %}
                    <a href="{% url 'profile' %}"><i class="fa fa-user"></i></a>
                    <a href="{% url 'logout' %}"><i class="fa fa-power-off"></i></a>
                {% else %}
                    <a href="{% url 'login' %}"><i class="fa fa-sign-in"></i></a>
                {% endif %}
            </div>
        </div>

        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <div id="main_container">
            {% block main %}
            {% endblock %}
        </div>

        <script>
            window.addEventListener('load', function(){
                var completion = new Completion('search');
                {% if enable_simple_search %}
                    new SimpleSearch('search', '.movie', 'h4');
                    completion.enabled = false;
                {% endif %}
            });
        </script>
    </body>
</html>
